<?xml version="1.0" encoding="UTF-8"?>

<!-- 使用配置文件进行配置 -->
<included>

    <property scope="system" resource="logback.properties" />

    <!-- 日志保存路径 -->
    <property name = "log.base.path" value="/opt/data/" />

    <!-- 判断值是否为空-->
    <if condition='isNull("log.history.maxday")' >
        <then>
            <property name="log.history.maxday" value="3"/>
        </then>
    </if>

    <if condition='isNull("appName")' >
        <then>
            <property name="appName" value="log-default-name"/>
        </then>
    </if>

    <if condition='isNull("log.env")' >
        <then>
            <property name="env" value="dev"/>
        </then>
    </if>


    <property name="log.project" value="${appName}"/>

    <property scope="system" name="log.base" value="${log.base.path}/${log.project}/log"/>

    <include resource="com/zhiyin/logging/logback/base-appender.xml"/>
    <include resource="com/zhiyin/logging/logback/logback-warn-level.xml"/>

    <if condition='property("env").equals("prod")'>
        <then>
            <root level="INFO">
                <appender-ref ref="all_info" level="INFO"/>
                <appender-ref ref="all_error"/>
            </root>
        </then>
    </if>
    <if condition='property("env").equals("dev")'>
        <then>
            <root level="INFO">
                <appender-ref ref="STDOUT"/>
                <appender-ref ref="all_info" level="INFO"/>
                <appender-ref ref="all_error"/>
            </root>
        </then>
    </if>
    


</included>
