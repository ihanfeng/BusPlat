<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zhiyin.dbs.module.address.mapper.CustomAddressMapper" >


  <resultMap id="BaseResultMap" type="CustomAddress" >
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="map_user_location_picture" property="mapUserLocationPicture" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="fullname" property="fullname" jdbcType="VARCHAR" />
    <result column="nickname" property="nickname" jdbcType="VARCHAR" />
    <result column="parent_id" property="parentId" jdbcType="BIGINT" />
    <result column="description" property="description" jdbcType="VARCHAR" />
    <result column="add_time" property="addTime" jdbcType="TIMESTAMP" />
    <result column="add_user_id" property="addUserId" jdbcType="BIGINT" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="update_user_id" property="updateUserId" jdbcType="BIGINT" />
    <result column="del_status" property="delStatus" jdbcType="INTEGER" />
    <result column="degree" property="degree" jdbcType="INTEGER" />
    <result column="center_longitude" property="centerLongitude" jdbcType="DOUBLE" />
    <result column="center_latitude" property="centerLatitude" jdbcType="DOUBLE" />
    <result column="center_isset" property="centerIsset" jdbcType="TINYINT" />
    <result column="center_coord" property="centerCoord" jdbcType="INTEGER" />
      <result column="city_id" property="cityId" jdbcType="BIGINT" />
    <result column="overlay_degree" property="overlayDegree" jdbcType="BIGINT" />

  </resultMap>
  <sql id="Base_Column_List" >
    id, map_user_location_picture, name, fullname, nickname, parent_id, description,
    add_time, add_user_id, update_time, update_user_id, del_status, degree, center_longitude,
    center_latitude, center_isset, center_coord,city_id,overlay_degree
  </sql>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
        delete from zhiyin_addr_custom_address
        where id = #{id,jdbcType=BIGINT}
    </delete>

  <select id="selectByName" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select
    <include refid="Base_Column_List" />
    from zhiyin_addr_custom_address
    where
      name = #{name}
    and
    del_status=0
  </select>

  <select id="selectByNameDegree" resultMap="BaseResultMap" parameterType="java.util.Map" >
    select
    <include refid="Base_Column_List" />
    from zhiyin_addr_custom_address
    where
    name = #{name}
      and
      degree = #{degree}
    and
    del_status=0
  </select>

  
  <!-- 根据Id查询热点信息 -->
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    select 
    <include refid="Base_Column_List" />
    from zhiyin_addr_custom_address
    where id = #{id,jdbcType=BIGINT}
    and
    del_status=0
  </select>


    <select id="selectByIdList" resultMap="BaseResultMap" >
        select
        <include refid="Base_Column_List" />
        from zhiyin_addr_custom_address
        <where>
            id in
            <foreach item="item" collection="list" separator="," open="(" close=")" index="">
                #{item}
            </foreach>
            and del_status=0
        </where>
    </select>

    <!-- 分页查询热点信息 -->
  <select id="selectAllByPage" resultMap="BaseResultMap" >
    select 
    <include refid="Base_Column_List" />
    from zhiyin_addr_custom_address
    where
    del_status=0
  </select>


  <!--查城市某等级的自定义热点 -->
  <select id="selectByDegree" resultMap="BaseResultMap"  parameterType="CustomAddress" >
    select
    <include refid="Base_Column_List" />
    from zhiyin_addr_custom_address
    where
    del_status=0 and
    degree = #{degree}
  </select>


    <!--查城市某等级的自定义热点 -->
    <select id="selectByDegreeAndCityId" resultMap="BaseResultMap"  parameterType="CustomAddress" >
        select
        <include refid="Base_Column_List" />
        from zhiyin_addr_custom_address
        where
        del_status=0 and
        city_id = #{cityId} AND
        degree = #{degree}
    </select>

    <!-- 查询子热点 -->
  <select id="selectSonId" resultType="Long"  parameterType="java.lang.Long" >
    select
    id
    from zhiyin_addr_custom_address
    where
    del_status=0 and
    parent_id = #{parentId}
  </select>
    <select id="selectSon" resultMap="BaseResultMap"  parameterType="java.lang.Long" >
        select
        <include refid="Base_Column_List" />
        from zhiyin_addr_custom_address
        where
        del_status=0 and
        parent_id = #{parentId}
    </select>

  <!-- 查询父位置包含的子位置 -->
  <select id="selectAllSonId" resultType="java.lang.String"  parameterType="java.lang.Long" >
      select func_getAllAddrSon( #{parentId} );
  </select>

    <select id="selectAllParentId" resultType="java.lang.String"  parameterType="java.lang.Long" >
        select func_getAllAddrPar( #{addrId} );
    </select>

  <!-- 查询热点信息 -->
  <select id="selectAll" resultMap="BaseResultMap"  >
    select 
    <include refid="Base_Column_List" />
    from zhiyin_addr_custom_address
    where
    del_status=0
  </select>

  <insert id="insertSelective" parameterType="CustomAddress" >
    insert into zhiyin_addr_custom_address
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="mapUserLocationPicture != null" >
        map_user_location_picture,
      </if>
      <if test="name != null" >
        name,
      </if>
      <if test="fullname != null" >
        fullname,
      </if>
      <if test="nickname != null" >
        nickname,
      </if>
      <if test="parentId != null" >
        parent_id,
      </if>
      <if test="description != null" >
        description,
      </if>
      <if test="addTime != null" >
        add_time,
      </if>
      <if test="addUserId != null" >
        add_user_id,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
      <if test="updateUserId != null" >
        update_user_id,
      </if>
      <if test="delStatus != null" >
        del_status,
      </if>
      <if test="degree != null" >
        degree,
      </if>
      <if test="centerLongitude != null" >
        center_longitude,
      </if>
      <if test="centerLatitude != null" >
        center_latitude,
      </if>
      <if test="centerIsset != null" >
        center_isset,
      </if>
      <if test="centerCoord != null" >
        center_coord,
      </if>
        <if test="cityId != null" >
            city_id,
        </if>

        <if test="overlayDegree != null" >
            overlay_degree,
        </if>

    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="mapUserLocationPicture != null" >
        #{mapUserLocationPicture,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="fullname != null" >
        #{fullname,jdbcType=VARCHAR},
      </if>
      <if test="nickname != null" >
        #{nickname,jdbcType=VARCHAR},
      </if>
      <if test="parentId != null" >
        #{parentId,jdbcType=BIGINT},
      </if>
      <if test="description != null" >
        #{description,jdbcType=VARCHAR},
      </if>
      <if test="addTime != null" >
        #{addTime,jdbcType=TIMESTAMP},
      </if>
      <if test="addUserId != null" >
        #{addUserId,jdbcType=BIGINT},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUserId != null" >
        #{updateUserId,jdbcType=BIGINT},
      </if>
      <if test="delStatus != null" >
        #{delStatus,jdbcType=INTEGER},
      </if>
      <if test="degree != null" >
        #{degree,jdbcType=INTEGER},
      </if>
      <if test="centerLongitude != null" >
        #{centerLongitude,jdbcType=DOUBLE},
      </if>
      <if test="centerLatitude != null" >
        #{centerLatitude,jdbcType=DOUBLE},
      </if>
      <if test="centerIsset != null" >
        #{centerIsset,jdbcType=TINYINT},
      </if>
      <if test="centerCoord != null" >
        #{centerCoord,jdbcType=INTEGER},
      </if>
        <if test="cityId != null" >
            #{cityId},
        </if>

        <if test="overlayDegree != null" >
            #{overlayDegree},
        </if>

    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="CustomAddress" >
    update zhiyin_addr_custom_address
    <set >
      <if test="mapUserLocationPicture != null" >
        map_user_location_picture = #{mapUserLocationPicture,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="fullname != null" >
        fullname = #{fullname,jdbcType=VARCHAR},
      </if>
      <if test="nickname != null" >
        nickname = #{nickname,jdbcType=VARCHAR},
      </if>
      <if test="parentId != null" >
        parent_id = #{parentId,jdbcType=BIGINT},
      </if>
      <if test="description != null" >
        description = #{description,jdbcType=VARCHAR},
      </if>
      <if test="addTime != null" >
        add_time = #{addTime,jdbcType=TIMESTAMP},
      </if>
      <if test="addUserId != null" >
        add_user_id = #{addUserId,jdbcType=BIGINT},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUserId != null" >
        update_user_id = #{updateUserId,jdbcType=BIGINT},
      </if>
      <if test="delStatus != null" >
        del_status = #{delStatus,jdbcType=INTEGER},
      </if>
      <if test="degree != null" >
        degree = #{degree,jdbcType=INTEGER},
      </if>
      <if test="centerLongitude != null" >
        center_longitude = #{centerLongitude,jdbcType=DOUBLE},
      </if>
      <if test="centerLatitude != null" >
        center_latitude = #{centerLatitude,jdbcType=DOUBLE},
      </if>
      <if test="centerIsset != null" >
        center_isset = #{centerIsset,jdbcType=TINYINT},
      </if>
      <if test="centerCoord != null" >
        center_coord = #{centerCoord,jdbcType=INTEGER},
      </if>

        <if test="cityId != null" >
            city_id = #{cityId,jdbcType=INTEGER},
        </if>

        <if test="overlayDegree != null" >
            overlay_degree =   #{overlayDegree,jdbcType=INTEGER},
        </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>

</mapper>